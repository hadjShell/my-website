import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,d as a,o as i}from"./app-RW3vCLg3.js";const l="/assets/image/react/Redux-Concept.png",t={};function p(r,s){return i(),n("div",null,[...s[0]||(s[0]=[a(`<h2 id="intro" tabindex="-1"><a class="header-anchor" href="#intro"><span>Intro</span></a></h2><ul><li>React is a JavaScript library for rendering UI</li></ul><hr><h2 id="components" tabindex="-1"><a class="header-anchor" href="#components"><span>Components</span></a></h2><ul><li>React is all about <em>Components</em></li><li>A component is a piece of the UI that has its own logic and appearance</li><li>We don&#39;t have to manipulate DOM manually anymore with components</li><li><strong>A component is just a JavaScript function</strong><ul><li>Their names always begin with a capital letter</li><li>They return JSX markup</li></ul></li><li>React application begins at a &quot;root&quot; component</li></ul><h3 id="jsx" tabindex="-1"><a class="header-anchor" href="#jsx"><span>JSX</span></a></h3><ul><li>JavaScript XML</li><li>A syntax extension for JavaScript that lets you write HTML-like markup inside a <code>.js</code> file</li><li>Rules of JSX <ul><li>Return a single root element <ul><li><code>React.createElement()</code> is invoked behind the scene</li><li>Built-in tag <code>&lt;Fragment&gt;</code><ul><li>Alternatively written as <code>&lt;&gt;...&lt;/&gt;</code></li><li>It&#39;s an empty tag</li><li>Let you group things without leaving any trace in the browser HTML tree</li></ul></li></ul></li><li>All tags must be closed</li><li><code>camelCase </code><s>all</s> most of the things <ul><li>HTML and SVG attributes are written in <code>camelCase</code></li><li>For historical reasons, <a href="https://developer.mozilla.org/docs/Web/Accessibility/ARIA" target="_blank" rel="noopener noreferrer"><code>aria-*</code></a> and <a href="https://developer.mozilla.org/docs/Learn/HTML/Howto/Use_data_attributes" target="_blank" rel="noopener noreferrer"><code>data-*</code></a> attributes are written as in HTML with dashes</li></ul></li></ul></li><li>Dynamic data: <code>{}</code><ul><li><strong>As text</strong> directly inside a JSX tag</li><li><strong>As attributes</strong> immediately following the <code>=</code> sign</li><li>Any JavaScript expression will work between curly braces, including function calls</li></ul></li><li>Fundamentally, JSX just provides a syntactic sugar for the <code>React.createElement</code> function</li></ul><h3 id="props" tabindex="-1"><a class="header-anchor" href="#props"><span><code>props</code></span></a></h3><ul><li><p><code>props</code> are the information that you pass to a JSX tag</p></li><li><p>Process</p><ul><li>Set <code>props</code>: Add <strong>custom attributes</strong> onto the custom HTML elements (components)</li><li>Merge into object: React merges all <code>props</code> into a single object</li><li>Receive <code>props</code>: Components (the function) will accept the <code>props</code> as the first argument</li></ul></li><li><p>Conventionally the parameter is named with <code>props</code></p></li><li><p>Usually you don&#39;t need the whole <code>props</code> object itself, so destruct it into individual <code>prop</code></p></li><li><p>Pass <code>props</code> through multiple components</p><div class="language-jsx line-numbers-mode" data-highlighter="shiki" data-ext="jsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-jsx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Profile</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">props</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> className</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;card&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Avatar</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;"> {</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">props</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  );</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>De-constructing or setting default values on <code>props</code>: <code>...</code></li></ul></li><li><p>Composition of components</p><ul><li><p>When you nest component in another component, the parent component will receive that content in <code>props</code></p></li><li><p><code>{props.children}</code></p></li><li><p>Like a wrapper</p><div class="language-jsx line-numbers-mode" data-highlighter="shiki" data-ext="jsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-jsx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> Avatar</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;./Avatar.js&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Card</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({ </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">children</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> className</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;card&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">children</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;"> default</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Profile</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Card</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Avatar</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">        size</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">        person</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">={{
          name: &quot;Katsuko Saruhashi&quot;,
          imageId: &quot;YfeOqp2&quot;,
        }}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Card</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  );</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><blockquote><p><strong>Trick</strong>: Pass a component identifier as a value for a <code>prop</code> to dynamically render different components inside a component</p><ul><li>That <code>prop</code> should be named with a start of capital letter</li><li>The value: default element: <code>&lt;Default&gt;</code>; customised element: <code>&lt;ComponentName&gt;</code></li></ul></blockquote><ul><li><code>props</code> are <strong>immutable</strong><ul><li>When a component needs to change its props (for example, in response to a user interaction or new data), it will have to “ask” its parent component to pass it different <code>props</code>— <em>a new object</em></li></ul></li></ul><h3 id="conditional-rendering" tabindex="-1"><a class="header-anchor" href="#conditional-rendering"><span>Conditional Rendering</span></a></h3><ul><li>Shortcuts: <code>&lt;condition&gt; ? &lt;content1&gt; : &lt;content2&gt;</code>, <code>&lt;condition&gt; &amp;&amp; &lt;content&gt;</code></li></ul><h3 id="rendering-lists" tabindex="-1"><a class="header-anchor" href="#rendering-lists"><span>Rendering Lists</span></a></h3><ul><li><p><code>map</code>, <code>filter</code>: array of objects to array of JSX markup</p></li><li><p><strong><code>key</code></strong></p><ul><li>You need to give each array item a <code>key</code></li><li>A string or a number that uniquely identifies it among other items in that array</li><li>Useful for future manipulations</li><li>Do <strong>NOT</strong> generate <code>key</code> on the fly, instead you should include them in your data</li><li>Where to get your <code>key</code><ul><li>Data from a database or API: use their keys</li><li>Locally generated data: use an incrementing counter <a href="https://developer.mozilla.org/en-US/docs/Web/API/Crypto/randomUUID" target="_blank" rel="noopener noreferrer"><code>crypto.randomUUID()</code></a> or a package like <a href="https://www.npmjs.com/package/uuid" target="_blank" rel="noopener noreferrer"><code>uuid</code></a> when creating items</li></ul></li><li><strong>The components won&#39;t receive <code>key</code> as a <code>prop</code></strong>, it&#39;s only used as a hint by React itself</li></ul><div class="language-jsx line-numbers-mode" data-highlighter="shiki" data-ext="jsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-jsx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;"> default</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> List</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({ </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">people</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> listItems</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> people</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">map</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">person</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">li</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> key</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">person</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">li</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ));</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ul</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">listItems</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ul</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="keep-components-pure" tabindex="-1"><a class="header-anchor" href="#keep-components-pure"><span>Keep Components <strong>Pure</strong></span></a></h3><ul><li><p>Components should only return their JSX, and not change any objects or variables that existed before rendering</p><ul><li>It&#39;s totally okay to change variables and objects that you&#39;ve just created while rendering inside the component functions</li></ul></li><li><p>React offers a &quot;Strict mode&quot; in which it calls each component&#39;s function twice during development</p></li><li><p>By calling the component functions twice, strict mode helps find components that break these rules</p></li><li><p>Strict mode has no effect in production</p></li><li><p><a href="#dealing-with-effects">Side effects</a></p><ul><li>In React, <strong>side effects usually belong inside event handlers</strong></li><li>Even though event handlers are defined <em>inside</em> your component, they don’t run <em>during</em> rendering! <strong>So event handlers don’t need to be pure</strong></li><li>As a last resort, use <code>useEffect</code></li></ul></li></ul><hr><h2 id="interactivity" tabindex="-1"><a class="header-anchor" href="#interactivity"><span>Interactivity</span></a></h2><h3 id="event-handlers" tabindex="-1"><a class="header-anchor" href="#event-handlers"><span>Event Handlers</span></a></h3><ul><li><p>You can respond to events by declaring event handler functions <strong>inside the components</strong></p><div class="language-jsx line-numbers-mode" data-highlighter="shiki" data-ext="jsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-jsx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;"> default</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Button</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handleClick</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    alert</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;You clicked me!&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> onClick</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">handleClick</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;Click me&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// if the handler accept parameters, a common pattern for using it is:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// &lt;button onClick={() =&gt; handleClick(params)}&gt;Click me&lt;/button&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Often you&#39;ll want the parent component to specify a child&#39;s event handler and pass it to the child as a <code>prop</code></p></li><li><p>By convention, handlers should start with <code>handle</code>; handlers <code>prop</code> should start with <code>on</code></p></li><li><p>On all built-in HTML elements we have full access to all native DOM events</p></li><li><p>Built-in components only support browser event names</p></li><li><p>Custom components can have custom handler name</p></li><li><p>Event handlers receive an <strong>event object</strong> as their only argument. By convention, it’s usually called <code>e</code></p></li><li><p>All events propagate in React except <code>onScroll</code>, which only works on the JSX tag you attach it to</p><ul><li>Stop propagation: <code>e.stopPropagation()</code></li></ul></li><li><p><code>e.preventDefault()</code></p></li></ul><h3 id="state" tabindex="-1"><a class="header-anchor" href="#state"><span><code>state</code></span></a></h3><ul><li><p>Why local variable isn&#39;t enough</p><ul><li><strong>Local variables don’t persist between renders.</strong> When React renders this component a second time, it renders it from scratch—it doesn’t consider any changes to the local variables</li><li><strong>Changes to local variables won’t trigger renders.</strong> React doesn’t realize it needs to render the component again with the new data</li></ul></li><li><p>To update a component with new data, two things need to happen:</p><ul><li><strong>Retain</strong> the data between renders</li><li><strong>Trigger</strong> React to render the component with new data (re-rendering)</li></ul></li><li><p><code>state</code> is the component-specific memory</p></li><li><p><code>useState(initialState)</code></p><ul><li>A React Hook that lets you add a state variable to your component</li><li><code>initialState</code><ul><li>The value you want the <code>state</code> to be initially</li></ul></li><li>Returns <ul><li>The current <code>state</code> variable to retain data between renders</li><li>The <code>set</code> function that lets you update the state to a different value and trigger a re-render <ul><li>The <code>set</code> function <strong>only updates the state variable for the next render</strong></li></ul></li></ul></li></ul><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>import { useState } from &quot;react&quot;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function Component(props) {</span></span>
<span class="line"><span>    const [title, setTitle] = useState(props.title);</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Avoid recreating the initial state</p><ul><li><p>React saves the initial state once and ignores it on the next renders.</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-javascript"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TodoList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">todos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">setTodos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createInitialTodos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Although the result of <code>createInitialTodos()</code> is only used for the initial render, you’re still calling this function on every render. This can be wasteful if it’s creating large arrays or performing expensive calculations.</p></li><li><p>To solve this, you may <strong>pass it as an initializer function</strong> to <code>useState</code> instead:</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-javascript"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TodoList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">todos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">setTodos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">createInitialTodos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Notice that you’re passing <code>createInitialTodos</code>, which is the <em>function itself</em>, and not <code>createInitialTodos()</code>, which is the result of calling it. If you pass a function to <code>useState</code>, React will only call it during initialization.</p></li></ul></li></ul></li><li><p>You can have as many state variables of as many types as you like in one component</p></li><li><p><code>state</code> is isolated and private</p><ul><li>If you render the same component multiple times, each will get its own state</li><li>State is fully private to the component declaring it, the parent component cannot change it</li></ul></li><li><p><strong>A <code>state</code> variable&#39;s value never changes within a render, even if its event handler&#39;s code is asynchronous</strong></p></li><li><p><strong><code>props</code> vs. <code>state</code></strong></p><ul><li><a href="https://react.dev/learn/passing-props-to-a-component" target="_blank" rel="noopener noreferrer"><strong>Props</strong> are like arguments you pass</a> to a function. They let a parent component pass data to a child component and customize its appearance. For example, a <code>Form</code> can pass a <code>color</code> <code>prop</code> to a <code>Button</code></li><li><a href="https://react.dev/learn/state-a-components-memory" target="_blank" rel="noopener noreferrer"><strong>State</strong> is like a component’s memory.</a> It lets a component keep track of some information and change it in response to interactions. For example, a <code>Button</code> might keep track of <code>isHovered</code> state</li></ul></li></ul><h3 id="trigger-render-and-commit" tabindex="-1"><a class="header-anchor" href="#trigger-render-and-commit"><span>Trigger, Render and Commit</span></a></h3><ul><li><p>The process of requesting and serving UI</p><ol><li>Triggering a render <ul><li>Component&#39;s initial render, or</li><li>The component&#39;s (or one of its ancestors) <code>state</code> has been updated</li></ul></li><li>Rendering the component (<strong>Calling your component function</strong>) <ul><li>On initial render, React will call the root component <code>root.render()</code></li><li>For <strong>subsequent renders</strong>, React will call the function component whose <code>state</code> update triggered the render (this process is recursive) <blockquote><p>You may have thought about the performance issue, look at the <a href="https://legacy.reactjs.org/docs/optimizing-performance.html" target="_blank" rel="noopener noreferrer">Performance section</a></p></blockquote></li></ul></li><li>Committing to the DOM <ul><li>For the initial render, React will use <code>appendChild()</code> DOM API to put all the DOM nodes it has created on the screen</li><li>For re-renders, React will apply the **minimal **necessary operations to make the DOM match the latest rendering output <ul><li>With the help of a virtual DOM</li></ul></li></ul></li><li>Browser paint the screen</li></ol></li><li><p>Optimisation by avoiding unnecessary component function execution</p><ul><li><p><code>memo()</code></p><ul><li>Wrap the component function as a parameter of <code>memo()</code></li><li>Component function won&#39;t execute if the <code>props</code> value are the same</li><li>Blocking a component execution will also block all children components execution</li><li>However, <ul><li>Don&#39;t overuse <code>memo()</code></li><li>Use it as high up in the component tree as possible</li><li>Checking <code>props</code> with <code>memo()</code> costs performance</li><li>Don&#39;t use it on components where <code>props</code> change frequently</li></ul></li></ul></li><li><p>Refactor your project to a clever structure</p></li></ul></li></ul><h3 id="queueing-a-series-of-state-updates" tabindex="-1"><a class="header-anchor" href="#queueing-a-series-of-state-updates"><span>Queueing a series of <code>state</code> updates</span></a></h3><ul><li><p>Batching</p><ul><li>React waits until all code in the event handlers or <code>useEffect()</code> has run before processing your state updates</li></ul></li><li><p>Update <code>state</code> <strong>based on its previous value</strong></p><ul><li><p>Pass <strong>a function</strong> to <code>setSomething</code> as <code>nextState</code>, which will be treated as an <strong>updater function</strong></p></li><li><p><a href="https://react.dev/reference/react/useState#setstate" target="_blank" rel="noopener noreferrer">Reference</a></p></li><li><p>Updater functions must be <strong>pure</strong> and only <strong>return the result</strong></p></li><li><p><strong>React queues this function to be processed after all the other code in the event handler has run</strong></p></li><li><p>During the next render, React goes through the queue and gives you <strong>the latest updated <code>state</code></strong></p></li><li><p>By convention, name the updater function argument by the first letters of the corresponding <code>state</code> variable</p><div class="language-jsx line-numbers-mode" data-highlighter="shiki" data-ext="jsx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-jsx"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;react&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;"> default</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Counter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">number</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">setNumber</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">h1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">number</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">h1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">        onClick</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          setNumber</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">n</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> n</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          setNumber</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">n</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> n</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          setNumber</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">n</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> n</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        +3</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  );</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>Update the DOM synchronously</p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>flushSync(() =&gt; {</span></span>
<span class="line"><span>  setTodos([ ...todos, newTodo]);</span></span>
<span class="line"><span>});</span></span>
<span class="line"><span>listRef.current.lastChild.scrollIntoView();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>This will instruct React to update the DOM synchronously right after the code wrapped in <code>flushSync</code> executes</li></ul><blockquote><p>Using <code>flushSync</code> is uncommon and can hurt the performance of your app</p></blockquote></li></ul><h3 id="updating-objects-or-arrays-in-state" tabindex="-1"><a class="header-anchor" href="#updating-objects-or-arrays-in-state"><span>Updating Objects or Arrays in <code>state</code></span></a></h3><ul><li>You shouldn&#39;t change objects or arrays that you hold in the <code>state</code> directly</li><li>Instead, when you want to update it, you need to create a new one (or make a copy of an existing one), and then set the <code>state</code> to use the copy</li><li>Treat <code>state</code> as <strong>immutable</strong></li><li>Updating a nested object or array of objects: <a href="https://github.com/immerjs/use-immer" target="_blank" rel="noopener noreferrer">Immer</a><ul><li>To achieve deep clone</li><li>How to use Immer <ul><li>Run <code>npm install use-immer</code> to add Immer as a dependency</li><li>Replace <code>import { useState } from &#39;react&#39;</code> with <code>import { useImmer } from &#39;use-immer&#39;</code></li><li>Now you can change the <code>state</code> directly inside the updater function (<strong>syntax sugar</strong>)</li></ul></li></ul></li></ul><h3 id="component-lifecycle" tabindex="-1"><a class="header-anchor" href="#component-lifecycle"><span>Component Lifecycle</span></a></h3><ul><li>A component <em>mounts</em> when it’s added to the screen</li><li>A component <em>updates</em> when it receives new <code>props</code> or <code>state</code>, usually in response to an interaction</li><li>A component <em>unmounts</em> when it’s removed from the screen</li><li>All values declare in the component body are reactive</li></ul><hr><h2 id="managing-state" tabindex="-1"><a class="header-anchor" href="#managing-state"><span>Managing <code>state</code></span></a></h2><h3 id="thinking-about-ui-declaratively" tabindex="-1"><a class="header-anchor" href="#thinking-about-ui-declaratively"><span>Thinking about UI declaratively</span></a></h3><ul><li><p>Identify component&#39;s different visual states</p><ul><li>Treat component as a <strong><em>state machine</em></strong></li><li>Have a <code>state</code> variable - <code>status</code>, and let it decide how the component should look like (return different markup)</li></ul></li><li><p>Determine the human or computer events that trigger those state changes</p><ul><li>Set <code>state</code> variables to update UI</li></ul></li><li><p>Represent the <code>state</code> in memory with <code>useState</code></p></li><li><p>Remove any non-essential <code>state</code></p><ul><li>Derive values from essential <code>states</code></li></ul></li><li><p>Connect the event handlers to <code>setState</code></p><blockquote><p>Components wrap controller and view together, but make them much easier to code and much less fragile</p></blockquote></li></ul><h3 id="principle-for-structuring-state" tabindex="-1"><a class="header-anchor" href="#principle-for-structuring-state"><span>Principle for structuring <code>state</code></span></a></h3><ul><li>Group related state</li><li>Avoid contradiction</li><li>Avoid redundancy</li><li>Avoid duplication</li><li>Avoid deeply nested <code>state</code></li></ul><h3 id="sharing-state-between-components" tabindex="-1"><a class="header-anchor" href="#sharing-state-between-components"><span>Sharing <code>state</code> between components</span></a></h3><ul><li><strong>Lifting <code>state</code> up</strong><ul><li>Sometimes, you want the <code>state</code> of two components to always change together. To do it, remove <code>state</code> from both of them, move it to their closest common parent, and then pass <code>state</code> and <code>setState</code> down to them <strong>via <code>props</code></strong></li></ul></li><li>Uncontrolled components: components with local <code>state</code></li><li>Controlled component: the important information in it is driven by <code>props</code> rather than its own local <code>state</code></li><li>When writing a component, consider which information in it should be controlled (<em>via <code>props</code></em>), and which information should be uncontrolled (<em>via <code>state</code></em>)</li><li><strong>Single source of truth</strong></li></ul><h3 id="react-maintain-an-ui-tree-like-dom" tabindex="-1"><a class="header-anchor" href="#react-maintain-an-ui-tree-like-dom"><span>React maintain an UI tree (like DOM)</span></a></h3><ul><li><p><code>state</code> is tied to a <strong><em>position</em></strong> and <strong><em>component type</em></strong> in the tree</p><ul><li><strong><code>state</code> is held inside React instead of &quot;living&quot; inside the component</strong></li><li>React preserves a component’s <code>state</code> for as long as it’s being rendered at its position in the UI tree. If it gets removed, or a different component gets rendered at the same position, React discards its <code>state</code></li><li><strong>It&#39;s the position in the UI tree</strong> - not in the JSX markup <ul><li>Same components at the same position preserves <code>state</code></li><li>Different components at the same position reset <code>state</code></li></ul></li></ul></li><li><p><code>key</code> can be used to make React distinguish between any components</p><ul><li><p><code>key</code> isn&#39;t just for lists</p></li><li><p><code>key</code> is not globally unique, they only specify the position within the parent</p><blockquote><p><strong>Trick</strong>: Use <code>key</code> for <strong>resetting components at the same position</strong></p><ul><li>React will destroy the old component instance if the value of <code>key</code> has changed</li><li>Unmount and remount the component</li></ul></blockquote></li></ul></li></ul><h3 id="context-api" tabindex="-1"><a class="header-anchor" href="#context-api"><span>Context API</span></a></h3><ul><li><p>Prop drilling: passing shared data through multiple components layers</p><ul><li><p>It can be a problem when you have too many <code>state</code> to manage</p></li><li><p>Solution 1: Component Composition</p></li></ul></li><li><p><strong><code>Context</code></strong></p><ul><li><p>Lets the parent component make some information available to any component in the tree below it—no matter how deep—without passing it explicitly through <code>props</code></p></li><li><p><strong>How to use <code>Context</code></strong></p><ol><li><p>Create the context</p><ul><li><p>Create a context in a new file and export it</p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>// LevelContext.js</span></span>
<span class="line"><span>import { createContext } from &#39;react&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export const LevelContext = createContext(1);</span></span>
<span class="line"><span>// note: the value cannot only be states</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>The only argument to <code>createContext</code> is the <em>default</em> value</p></li></ul></li><li><p>Provide the context</p><ul><li><p>If you don’t provide the context, React will use the default value</p></li><li><p>Wrap the component who provide context with a context provider</p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>// Section.js</span></span>
<span class="line"><span>import { LevelContext } from &#39;./LevelContext.js&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default function Section({ level, children }) {</span></span>
<span class="line"><span>  return (</span></span>
<span class="line"><span>    &lt;section className=&quot;section&quot;&gt;</span></span>
<span class="line"><span>      &lt;LevelContext.Provider value={level}&gt;</span></span>
<span class="line"><span>      {/* This tells React:</span></span>
<span class="line"><span>      		If any component inside &lt;Section&gt; ask for \`LevelContext,</span></span>
<span class="line"><span>      		give them this \`level\`.</span></span>
<span class="line"><span>      		The component will use the value of the nearest</span></span>
<span class="line"><span>      		&lt;LevelContext.Provider&gt; in the UI tree above it</span></span>
<span class="line"><span>      */}</span></span>
<span class="line"><span>        {children}</span></span>
<span class="line"><span>      &lt;/LevelContext.Provider&gt;</span></span>
<span class="line"><span>    &lt;/section&gt;</span></span>
<span class="line"><span>  );</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Outsourcing <code>context</code> and <code>state</code> into a separate Provider component is a common pattern</p></blockquote></li></ul></li><li><p>Consume the context</p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>// Heading.js</span></span>
<span class="line"><span>import { useContext } from &#39;react&#39;;</span></span>
<span class="line"><span>import { LevelContext } from &#39;./LevelContext.js&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default function Heading({ children }) {</span></span>
<span class="line"><span>  const level = useContext(LevelContext);</span></span>
<span class="line"><span>  // \`useContext\` tells React that the \`Heading\`component wants to</span></span>
<span class="line"><span>  // read the \`LevelContext\`</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  // ...</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// App.js</span></span>
<span class="line"><span>&lt;Section level={4}&gt;</span></span>
<span class="line"><span>  &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;</span></span>
<span class="line"><span>  &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;</span></span>
<span class="line"><span>  &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;</span></span>
<span class="line"><span>&lt;/Section&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>React will re-execute the component function if the context value changes</p><blockquote><p>You can also outsource <code>useContext(LevelContext)</code> into the Provider component</p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>// LevelContext.js</span></span>
<span class="line"><span>export function useLevel() {</span></span>
<span class="line"><span>  return useContext(LevelContext);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// Heading.js</span></span>
<span class="line"><span>import { useLevel } from &quot;./LevelContext.js&quot;;</span></span>
<span class="line"><span>const level = useContext();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote></li></ul></li></ol></li><li><p><strong>Context lets you write components that “adapt to their surroundings” and display themselves differently depending on <em>where</em> (or, in other words, <em>in which context</em>) they are being rendered</strong></p></li><li><p>In React, the only way to override some context coming from above is to wrap children into a context provider with a different value</p></li><li><p>Different React contexts don&#39;t override each other</p></li><li><p>One component may use or provide many different contexts without a problem</p></li><li><p><strong>Use case for <code>context</code></strong></p><ul><li><strong>Theming:</strong> If your app lets the user change its appearance (e.g. dark mode), you can put a context provider at the top of your app, and use that context in components that need to adjust their visual look</li><li><strong>Current account:</strong> Many components might need to know the currently logged in user. Putting it in context makes it convenient to read it anywhere in the tree. Some apps also let you operate multiple accounts at the same time (e.g. to leave a comment as a different user). In those cases, it can be convenient to wrap a part of the UI into a nested provider with a different current account value</li><li><strong>Routing:</strong> Most routing solutions use context internally to hold the current route. This is how every link “knows” whether it’s active or not. If you build your own router, you might want to do it too</li><li><strong>Managing state:</strong> As your app grows, you might end up with a lot of state closer to the top of your app. Many distant components below may want to change it. It is common to <a href="https://react.dev/learn/scaling-up-with-reducer-and-context" target="_blank" rel="noopener noreferrer">use a reducer together with context</a> to manage complex state and pass it down to distant components without too much hassle</li></ul></li></ul></li></ul><h3 id="reducer" tabindex="-1"><a class="header-anchor" href="#reducer"><span>Reducer</span></a></h3><ul><li><p>A reducer in React or JavaScript programming is a function that reduce one or more complex values to a simpler one</p></li><li><p>You can consolidate <em>state update logic</em> with a reducer outside your component in a single function, called <code>reducer</code></p></li><li><p>How to use Reducer</p><ol><li><p>Move from setting <code>state</code> to dispatch <code>actions</code></p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>// From this</span></span>
<span class="line"><span>function handleAddTask(text) {</span></span>
<span class="line"><span>  setTasks([</span></span>
<span class="line"><span>    ...tasks,</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>      id: nextId++,</span></span>
<span class="line"><span>      text: text,</span></span>
<span class="line"><span>      done: false,</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>  ]);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function handleChangeTask(task) {</span></span>
<span class="line"><span>  setTasks(</span></span>
<span class="line"><span>    tasks.map((t) =&gt; {</span></span>
<span class="line"><span>      if (t.id === task.id) {</span></span>
<span class="line"><span>        return task;</span></span>
<span class="line"><span>      } else {</span></span>
<span class="line"><span>        return t;</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    })</span></span>
<span class="line"><span>  );</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function handleDeleteTask(taskId) {</span></span>
<span class="line"><span>  setTasks(tasks.filter((t) =&gt; t.id !== taskId));</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// To this</span></span>
<span class="line"><span>function handleAddTask(text) {</span></span>
<span class="line"><span>  dispatch(</span></span>
<span class="line"><span>    // &quot;action&quot; object</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>      type: &#39;ADD&#39;,</span></span>
<span class="line"><span>      payload: {</span></span>
<span class="line"><span>        id: nextId++,</span></span>
<span class="line"><span>      	text: text,</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>  	}</span></span>
<span class="line"><span>  );</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function handleChangeTask(task) {</span></span>
<span class="line"><span>  dispatch({</span></span>
<span class="line"><span>    type: &#39;CHANGE&#39;,</span></span>
<span class="line"><span>    payload: task,</span></span>
<span class="line"><span>  });</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function handleDeleteTask(taskId) {</span></span>
<span class="line"><span>  dispatch({</span></span>
<span class="line"><span>    type: &#39;DELETE&#39;,</span></span>
<span class="line"><span>    payload: taskId,</span></span>
<span class="line"><span>  });</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>An action object can have any shapes, by convention it&#39;s common to give a string <code>type</code> that describes what happened, and pass any additional information in an object <code>payload</code></li></ul></li><li><p>Write a reducer function</p><ol><li>Declare the current <code>state</code> as the first argument</li><li>Declare the <code>action</code> object as the second argument</li><li>Return the next <code>state</code> from the reducer</li></ol><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>function yourReducer(state, action) {</span></span>
<span class="line"><span>  // return next state for React to set</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>function tasksReducer(tasks, action) {</span></span>
<span class="line"><span>  switch (action.type) {</span></span>
<span class="line"><span>    case &#39;ADD&#39;: {</span></span>
<span class="line"><span>      return [</span></span>
<span class="line"><span>        ...tasks,</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>          id: action.payload.id,</span></span>
<span class="line"><span>          text: action.payload.text,</span></span>
<span class="line"><span>          done: false,</span></span>
<span class="line"><span>        },</span></span>
<span class="line"><span>      ];</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    case &#39;CHANGE&#39;: {</span></span>
<span class="line"><span>      return tasks.map((t) =&gt; {</span></span>
<span class="line"><span>        if (t.id === action.payload.id) {</span></span>
<span class="line"><span>          return action.payload;</span></span>
<span class="line"><span>        } else {</span></span>
<span class="line"><span>          return t;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>      });</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    case &#39;DELETE&#39;: {</span></span>
<span class="line"><span>      return tasks.filter((t) =&gt; t.id !== action.payload);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    default: {</span></span>
<span class="line"><span>      throw Error(&#39;Unknown action: &#39; + action.type);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>It is recommend wrapping each <code>case</code> block into the <code>{</code> and <code>}</code> curly braces so that variables declared inside of different <code>case</code> don’t clash with each other</li><li>Reducer function is declared <strong>outside the component function</strong> so that it won&#39;t be re-created every time the component gets updated</li></ul></li><li><p>Use the reducer from your component</p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>import {useReducer} from &#39;react&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// From this</span></span>
<span class="line"><span>const [tasks, setTasks] = useState(initialTasks);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// To this</span></span>
<span class="line"><span>const [tasks, dispatch] = useReducer(tasksReducer, initialTasks);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>The <code>useReducer()</code> Hook takes two arguments: <ol><li>A reducer function</li><li>An initial state</li></ol></li><li>And it returns: <ol><li>A stateful value</li><li>A dispatch function (to “dispatch” user actions to the reducer)</li></ol></li><li>If you want, you can even move the reducer to a different file</li></ul></li></ol></li><li><p><strong>Reducer must be pure</strong></p></li><li><p>Each action describes a single user interaction, even if that leads to multiple changes in the data</p></li><li><p>Writing concise reducer with <code>immer</code></p><ul><li><code>useImmerReducer</code></li><li>Reducers managed by <code>useImmerReducer</code> can mutate their first argument <code>state</code> and don’t need to return the new state (<strong>remember to <code>break</code></strong>)</li></ul></li></ul><hr><h2 id="refs" tabindex="-1"><a class="header-anchor" href="#refs"><span><code>refs</code></span></a></h2><h3 id="what-is-refs" tabindex="-1"><a class="header-anchor" href="#what-is-refs"><span>What is <code>refs</code></span></a></h3><ul><li><p>When you want a component to store some information, but you don&#39;t want to that information to trigger new renders, you can use a <code>ref</code></p></li><li><p>Adding a <code>ref</code> to your component</p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>import { useRef } from &#39;react&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const ref = useRef(0);</span></span>
<span class="line"><span>// useRef returns an object like this:</span></span>
<span class="line"><span>// { current: 0 }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>You can mutate <code>ref</code> instead of using a set function, just change the value of <code>ref.current</code></p></li><li><p><strong><code>ref</code> is mutable; <code>state</code> is immutable</strong></p></li><li><p>When to use <code>refs</code></p><ul><li>Storing <code>timeout</code> IDs</li><li>Storing and manipulating DOM elements</li><li>Storing other objects that aren&#39;t necessary to calculate the JSX</li></ul></li></ul><h3 id="manipulating-dom-with-refs" tabindex="-1"><a class="header-anchor" href="#manipulating-dom-with-refs"><span>Manipulating DOM with <code>refs</code></span></a></h3><ul><li><p>DOM manipulation is the most common use case for <code>refs</code></p></li><li><p>Getting a <code>ref</code> to the node</p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>const myRef = useRef(null);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;div ref={myRef}&gt;&lt;/div&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>myRef.current.scrollIntoView();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>Accessing another component&#39;s DOM nodes</strong></p><ul><li><p>By default. React does not let a component access the DOM nodes of other components</p></li><li><p>A component can specify that it &quot;forwards&quot; its <code>ref</code> to one of <strong>its children</strong></p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>const MyInput = forwardRef((props, ref) =&gt; {</span></span>
<span class="line"><span>  return &lt;input {...props} ref={ref} /&gt;;</span></span>
<span class="line"><span>});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>&lt;MyInput ref={inputRef} /&gt;</code> tells React to put the corresponding DOM node into <code>inputRef.current</code>. However, it’s up to the <code>MyInput</code> component to opt into that—by default, it doesn’t</li><li>The <code>MyInput</code> component is declared using <code>forwardRef()</code>. <strong>This opts it into receiving the <code>inputRef</code> from above as the second <code>ref</code> argument</strong> which is declared after <code>props</code></li><li><code>MyInput</code> itself passes the <code>ref</code> it received to the <code>&lt;input&gt;</code> inside of it</li></ul><blockquote><p>In design systems, it is a common pattern for low-level components like buttons, inputs, and so on, to forward their refs to their DOM nodes</p></blockquote></li></ul></li><li><p>You can expose component APIs via <a href="https://react.dev/reference/react/useImperativeHandle" target="_blank" rel="noopener noreferrer"><code>useImperativeHandle()</code></a></p></li><li><p>Avoid changing DOM nodes managed by React</p></li></ul><hr><h2 id="dealing-with-effects" tabindex="-1"><a class="header-anchor" href="#dealing-with-effects"><span>Dealing with <code>Effects</code></span></a></h2><h3 id="what-is-effects" tabindex="-1"><a class="header-anchor" href="#what-is-effects"><span>What is <code>Effects</code></span></a></h3><ul><li><p>Two types of logic inside React components</p><ul><li><strong>Rendering code</strong><ul><li>Where you take the <code>props</code> and <code>state</code>, transform them, and return the JSX you want to see on the screen</li><li>Renderer must be pure</li></ul></li><li><strong>Event handlers</strong><ul><li>Nested functions inside your components that do things rather than just calculate them</li><li>Event handlers contain <a href="https://en.wikipedia.org/wiki/Side_effect_(computer_science)" target="_blank" rel="noopener noreferrer">“side effects”</a> (they change the program’s state) caused by a specific user action</li></ul></li></ul></li><li><p>Sometimes it isn&#39;t enough</p></li><li><p><code>effects</code> let you specify side effects are <strong>caused by rendering itself, or parent components&#39; <code>state</code> change (<em>which is, essentially, re-rendering itself</em>), rather than by a particular event</strong></p><blockquote><p><em>For example, a <code>state</code> change in the event handler of a component can cause some side effects that need to be handled in the <code>useEffect</code> inside the child component</em></p></blockquote></li><li><p><code>effects</code> run <strong>at the end of a <a href="#render-and-commit">commit</a> after the screen updates</strong>. This is a good time to synchronize the React components with some <strong>external system</strong> (like network or a third-party library or browser APIs)</p></li></ul><h3 id="effects-dependencies" tabindex="-1"><a class="header-anchor" href="#effects-dependencies"><span><code>effects</code> &amp; <code>dependencies</code></span></a></h3><ul><li><p>How to write an <code>effect</code></p><ol><li><p>Declare an <code>effect</code></p><ul><li>By default, your <code>effect</code> will run every render</li></ul><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>useEffect(() =&gt; {</span></span>
<span class="line"><span>  // Code here will run</span></span>
<span class="line"><span>});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Specify the <code>dependencies</code></p><ul><li>Most <code>effects</code> should only re-run when needed rather than after every render</li><li>You can tell React to skip unnecessary re-running the <code>effect</code> by specifying an <strong>array</strong> of <code>dependencies</code> as the second argument to the <code>useEffect</code> call</li><li>The <code>dependencies</code> array can contain multiple dependencies. <strong>React will only skip re-running the <code>effect</code> if <em>all</em> of the dependencies you specify have exactly the same values as they had during the previous render</strong></li><li>You can&#39;t &quot;choose&quot; your dependencies, linter does</li></ul><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>useEffect(() =&gt; {</span></span>
<span class="line"><span>  // This runs after every render</span></span>
<span class="line"><span>});</span></span>
<span class="line"><span></span></span>
<span class="line"><span>useEffect(() =&gt; {</span></span>
<span class="line"><span>  // This runs only on mount (when the component appears)</span></span>
<span class="line"><span>}, []);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>useEffect(() =&gt; {</span></span>
<span class="line"><span>  // This runs on mount and also if either a or b have changed since the last render</span></span>
<span class="line"><span>}, [a, b]);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>React compares the dependency values using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is" target="_blank" rel="noopener noreferrer"><code>Object.is</code></a> comparison</li><li>The problem with object or function dependencies: infinite loop <ul><li><code>effect</code> execute even if the dependencies are logically equivalent (<em>with different pointers</em>)</li><li><a href="https://react.dev/reference/react/useCallback" target="_blank" rel="noopener noreferrer"><strong><code>useCallback()</code></strong></a> to solve this problem <ul><li>Cache the function definition between re-renders</li></ul></li><li>Or, try to avoid them</li></ul></li><li>Mutable values (including global variables) aren’t reactive, so they shouldn&#39;t be dependencies <ul><li>A mutable value like <code>location.pathname</code> can’t be a dependency</li><li>A mutable value like <code>ref.current</code> or things you read from it also can’t be a dependency</li><li><code>ref</code> can be listed in dependencies but no point to do it because it&#39;s never changed</li></ul></li></ul></li><li><p>Add cleanup if needed</p><ul><li>Some <code>effects</code> need to specify how to stop, undo, or clean up whatever they were doing</li><li>Return a cleanup function from your <code>useEffect()</code></li><li>React will call your cleanup function <strong>each time before the <code>useEffect()</code> runs again</strong>, and one final time when <strong>the component unmounts</strong></li></ul><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>  useEffect(() =&gt; {</span></span>
<span class="line"><span>    const connection = createConnection();</span></span>
<span class="line"><span>    connection.connect();</span></span>
<span class="line"><span>    return () =&gt; {</span></span>
<span class="line"><span>      connection.disconnect();</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }, []);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li><li><p>A potential problem with <code>effects</code> and <code>setState</code>: an infinte loop</p><ul><li><code>effect</code> execute after rendering, <code>setState</code> inside <code>effect</code> re-trigger the rendering</li><li>Solution: remove <code>state</code> from dependencies and pass updater function to <code>setState</code> in <code>useEffect()</code></li></ul></li><li><p>React will remount the <code>effects</code> whenever you save a file in development</p></li></ul><h3 id="when-not-to-use-useeffect" tabindex="-1"><a class="header-anchor" href="#when-not-to-use-useeffect"><span>When NOT to use <code>useEffect()</code></span></a></h3><ul><li>Some logic should only run once when the application starts. You can put it outside your components <ul><li><strong>Those codes wil execute once the first time the file is imported</strong></li></ul></li><li>Updating state based on <code>props</code> and <code>state</code><ul><li>Calculate the value inside the component</li></ul></li><li><a href="https://react.dev/learn/you-might-not-need-an-effect#initializing-the-application" target="_blank" rel="noopener noreferrer">Etc.</a></li></ul><hr><h2 id="react-hooks" tabindex="-1"><a class="header-anchor" href="#react-hooks"><span>React Hooks</span></a></h2><ul><li><strong>Hooks are functions that let you &quot;hook into&quot; React state and features from function components</strong></li><li>Functions starting with <code>use</code></li><li>Can only be called at the top level of your components or your own Hooks</li><li>Can only call Hooks on the top level</li></ul><h3 id="usecallback" tabindex="-1"><a class="header-anchor" href="#usecallback"><span><a href="https://react.dev/reference/react/useCallback" target="_blank" rel="noopener noreferrer"><code>useCallback()</code></a></span></a></h3><ul><li><p>Let you cache a function definition between re-renders</p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>const cachedFn = useCallback(fn, dependencies);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>Return</p><ul><li>On the initial render, <code>useCallback</code> returns the <code>fn</code> function you have passed</li><li>During subsequent renders, it will either return an already stored <code>fn</code> function from the last render (if the dependencies haven’t changed), or return the <code>fn</code> function you have passed during this render</li></ul></li><li><p>Usage</p><ul><li>You pass it as a prop to a component wrapped in <code>memo()</code>. You want to skip re-rendering if the value hasn’t changed. Memoization lets your component re-render only if dependencies changed</li><li>The function you’re passing is later used as a dependency of some Hook. For example, another function wrapped in <code>useCallback()</code> depends on it, or you depend on this function from <code>useEffect()</code></li></ul></li></ul><h3 id="usememo" tabindex="-1"><a class="header-anchor" href="#usememo"><span><a href="https://react.dev/reference/react/useMemo" target="_blank" rel="noopener noreferrer"><code>useMemo()</code></a></span></a></h3><ul><li><p>Let you cache the result of a calculation between re-renders</p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>const cachedValue = useMemo(calcValue, dependencies);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>Parameters</p><ul><li><code>calculateValue</code>: <strong>The function calculating the value</strong> that you want to cache. It should be pure, should take no arguments, and should return a value of any type. React will call your function during the initial render. On next renders, React will return the same value again if the <code>dependencies</code> have not changed since the last render. Otherwise, it will call <code>calculateValue</code>, return its result, and store it so it can be reused later</li></ul></li><li><p>Return</p><ul><li>On the initial render, <code>useMemo</code> returns the result of calling <code>calculateValue</code> with no arguments</li><li>During next renders, it will either return an already stored value from the last render (if the dependencies haven’t changed), or call <code>calculateValue</code> again, and return the result that <code>calculateValue</code> has returned</li></ul></li><li><p>Usage</p><ul><li><strong>You should only rely on <code>useMemo()</code> as a performance optimization</strong></li><li>Skipping expensive recalculations</li></ul></li></ul><h3 id="custom-hooks" tabindex="-1"><a class="header-anchor" href="#custom-hooks"><span>Custom Hooks</span></a></h3><ul><li><p>Share logic between components</p></li><li><p>Hook names always start with <code>use</code></p></li><li><p>Custom hooks let you share stateful logic, not <code>state</code> itself; each call to a Hook is completely independent from every other call to the same Hook</p></li><li><p>When to use custom hook</p><ul><li><p>With time, most of your app&#39;s <code>effect</code> will be in custom Hooks</p><ul><li>You make the data flow to and from your Effects very explicit</li><li>You let your components focus on the intent rather than on the exact implementation of your Effects</li><li>When React adds new features, you can remove those Effects without changing any of your components</li></ul></li><li><p>Keep custom Hooks focused on concrete high-level use cases</p></li><li><p>A good custom Hook makes the calling code more declarative by constraining what it does</p></li></ul></li></ul><hr><h2 id="debugging-react-apps" tabindex="-1"><a class="header-anchor" href="#debugging-react-apps"><span>Debugging React Apps</span></a></h2><ul><li>Error messages</li><li>Browser debugger</li><li>&quot;strict mode&quot; <ul><li>A React component <code>StrictMode</code> as an wrapper for other components</li></ul></li><li>React DevTools</li></ul><hr><h2 id="class-based-components" tabindex="-1"><a class="header-anchor" href="#class-based-components"><span>Class-Based Components</span></a></h2><h3 id="what-why" tabindex="-1"><a class="header-anchor" href="#what-why"><span>What &amp; Why</span></a></h3><ul><li>Functional component is the default and most modern approach</li><li>Traditionally, which means before React 16.8, you had to use class-based components to manage <code>state</code></li><li>React 16.8 introduced <em>React Hooks</em> for functional components</li><li>Class-based components <strong>CAN&#39;T</strong> use React Hooks</li></ul><h3 id="working-with-class-based-components" tabindex="-1"><a class="header-anchor" href="#working-with-class-based-components"><span>Working with Class-Based Components</span></a></h3><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>import { Component } from &#39;react&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>class User extends Component {</span></span>
<span class="line"><span>  static contextType = UsersContext;</span></span>
<span class="line"><span>  // pitfall: can only link to one context</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  constructor() {</span></span>
<span class="line"><span>    super();</span></span>
<span class="line"><span>    // For class-based component, state is always an object</span></span>
<span class="line"><span>    // And it also has to be a property named &quot;state&quot;</span></span>
<span class="line"><span>    this.state = {</span></span>
<span class="line"><span>      showUsers: true,</span></span>
<span class="line"><span>      more: &quot;test&quot;,</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  toggleUsersHandler() {</span></span>
<span class="line"><span>    // React will merge the new state object with the old one</span></span>
<span class="line"><span>    // this.setState({showUsers: false});</span></span>
<span class="line"><span>    this.setStae((curState) =&gt; {return {showUsers: !curState.showUsers};});</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  render() {</span></span>
<span class="line"><span>    const usersList = (</span></span>
<span class="line"><span>      &lt;ul&gt;</span></span>
<span class="line"><span>      	{this.context.users.map(user =&gt; &lt;User key={user.id} name={user.name} /&gt;)}</span></span>
<span class="line"><span>      &lt;/ul&gt;</span></span>
<span class="line"><span>    );</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    return (</span></span>
<span class="line"><span>      &lt;div className={classes.user}&gt;</span></span>
<span class="line"><span>        &lt;button onClick={this.toggleUsersHandler.bind(this)}&gt;</span></span>
<span class="line"><span>        	{this.state.showUsers ? &quot;Hide&quot; : &quot;Show&quot;} Users</span></span>
<span class="line"><span>        &lt;/button&gt;</span></span>
<span class="line"><span>        {this.state.showUsers &amp;&amp; usersList}</span></span>
<span class="line"><span>      &lt;/div&gt;</span></span>
<span class="line"><span>  	);</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// Component lifecycle methods</span></span>
<span class="line"><span>// A more imperative way, you have to add if block to specify when you want to skip the execution</span></span>
<span class="line"><span>componentDidMount() === useEffect(fn, []);							// Called once a component mounted</span></span>
<span class="line"><span>componentDidUpdate() === useEffect(fn, [someValue]);		// Called once a component updated</span></span>
<span class="line"><span>componentWillUnmount() === //cleanup function						// Called once a component unmounted</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="error-boundaries" tabindex="-1"><a class="header-anchor" href="#error-boundaries"><span>Error Boundaries</span></a></h3><ul><li><p>Right now (Nov 17 2023) this feature can only be used in class-based component</p></li><li><p>An error generated inside a component cannot be handled inside it, it should be treated as an information, and be catched and handled in the parent component</p></li><li><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>import { Component } from &#39;react&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// Wrap this error handler component around components should be protected by it</span></span>
<span class="line"><span>export default class ErrorBoundary extends Component {</span></span>
<span class="line"><span>  constructor() {</span></span>
<span class="line"><span>    super();</span></span>
<span class="line"><span>    this.state = {hasError: false};</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  componentDidCatch(error) {</span></span>
<span class="line"><span>    this.setState({hasError: true});</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  render() {</span></span>
<span class="line"><span>    if(hasError)</span></span>
<span class="line"><span>      return &lt;p&gt;Something went wrong!&lt;/p&gt;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    return this.props.children</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h2 id="handling-http-request" tabindex="-1"><a class="header-anchor" href="#handling-http-request"><span>Handling HTTP Request</span></a></h2><h3 id="how-to-connect-a-back-end-database" tabindex="-1"><a class="header-anchor" href="#how-to-connect-a-back-end-database"><span>How to Connect a Back-end / Database</span></a></h3><ul><li>Not all operations can be performed in the browser <ul><li>Cannot connect to a database directly</li><li>Cannot access a file system</li><li>Etc.</li></ul></li><li>Browser &lt;-&gt; Back Server &lt;-&gt; Database via HTTP</li></ul><h3 id="fetching-data" tabindex="-1"><a class="header-anchor" href="#fetching-data"><span>Fetching Data</span></a></h3><ul><li><code>useEffect()</code> + <code>fetch()</code></li><li>Handle loading status</li><li>Handle HTTP errors</li><li>Outsource <code>AJAX(url, config, initialData)</code> helper function</li></ul><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>useEffect(() =&gt; {</span></span>
<span class="line"><span>  (async function () {</span></span>
<span class="line"><span>    setIsFetching(true);</span></span>
<span class="line"><span>    try {</span></span>
<span class="line"><span>      const response = await fetch(&quot;http://localhost:3000/places&quot;);</span></span>
<span class="line"><span>    	if(!response.ok) {</span></span>
<span class="line"><span>      	throw new Error(\`💥 Failed to fetch data! \${response.status}\`);</span></span>
<span class="line"><span>    	}</span></span>
<span class="line"><span>      const data = await response.json();</span></span>
<span class="line"><span>      setPlaces(data.places);</span></span>
<span class="line"><span>    } catch(err) {</span></span>
<span class="line"><span>      setError(true);</span></span>
<span class="line"><span>      console.error(error.message);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    setIsFetching(false);</span></span>
<span class="line"><span>  })();</span></span>
<span class="line"><span>}, []);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="sending-data" tabindex="-1"><a class="header-anchor" href="#sending-data"><span>Sending Data</span></a></h3><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>export async function updateUserPlaces(places) {</span></span>
<span class="line"><span>  const response = await fetch(&quot;http://localhost:3000/user-places&quot;, {</span></span>
<span class="line"><span>    method: &quot;PUT&quot;,</span></span>
<span class="line"><span>    body: JSON.stringify({ places }),</span></span>
<span class="line"><span>    headers: {</span></span>
<span class="line"><span>      &quot;Content-Type&quot;: &quot;application/json&quot;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  });</span></span>
<span class="line"><span>  const data = await response.json();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  if(!response.ok)	throw new Error(&quot;Failed to update user data!&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  return data.message;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Handler functions can be <code>async</code></li><li>Optimistic updating <ul><li>Change the UI immediately before sending data behind the screen</li><li>Rollback the change if HTTP request fail</li></ul></li></ul><hr><h2 id="working-with-forms-user-input" tabindex="-1"><a class="header-anchor" href="#working-with-forms-user-input"><span>Working with Forms &amp; User Input</span></a></h2><h3 id="what-is-form" tabindex="-1"><a class="header-anchor" href="#what-is-form"><span>What is Form</span></a></h3><ul><li><a href="https://www.w3schools.com/html/html_forms.asp" target="_blank" rel="noopener noreferrer">HTML Forms</a></li><li>The <code>for</code> attribute of the <code>&lt;label&gt;</code> tag should be equal to the <code>id</code> attribute of the <code>&lt;input&gt;</code> element to bind them together <ul><li>In JSX it&#39;s named <code>htmlFor</code></li></ul></li><li>Each input field must have a <code>name</code> attribute to be submitted. If the <code>name</code> attribute is omitted, the value of the input field will not be sent at all</li><li>Validating user input is the trickier part</li></ul><h3 id="handling-form-submission" tabindex="-1"><a class="header-anchor" href="#handling-form-submission"><span>Handling Form Submission</span></a></h3><ul><li><p>Form submission</p><ul><li>By default, the browser sends a HTTP request to the server when a button inside <code>form</code> has been clicked; therefore, the page will reload</li><li>This can be a problem when there is no handler for this request on the server (React app)</li><li>Solution <ul><li><code>&lt;button type=&quot;button&quot;&gt;&lt;/button&gt;</code></li><li>Refactor from <code>&lt;button onClick={handler}&gt;&lt;/button&gt;</code> to <code>&lt;form onSubmit={handler}&gt;&lt;/form&gt;</code> + <code>e.preventDefault()</code><ul><li>Suggested way</li></ul></li></ul></li></ul></li><li><p>Getting user input via <code>state</code></p><ul><li>Two-way binding for updating inputs: <code>onChange={handler}</code> + <code>setState(e.targer.value)</code></li><li>Make it generic by creating object <code>state</code> and refactoring to one handler <code>handlerInputChange(identifier, e)</code></li></ul></li><li><p>Getting user input via <code>ref</code></p><ul><li>Link <code>refs</code> to <code>input</code> elements</li><li>Have to use <code>ref</code> to manipulate DOM directly which is not recommended</li><li>Cannot bundle <code>refs</code> into one object</li></ul></li><li><p>Getting user input via <code>FormData</code> &amp; native Browser APIs</p><ul><li>Useful for handling form that has lots of inputs</li><li>Example</li></ul><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>function handleSubmit(e) {</span></span>
<span class="line"><span>  e.preventDefault();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  const fd = new FormData(e.target);</span></span>
<span class="line"><span>  const acquisition = fd.getAll(&quot;acquisition&quot;);			// get all values asscoiated with a given input name</span></span>
<span class="line"><span>  const data = Object.fromEntries(fd.entries());</span></span>
<span class="line"><span>  data.acquisition = acquisition;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Resetting Form</p><ul><li><code>&lt;button type=&quot;reset&quot;&gt;Reset&lt;/button&gt;</code>; or,</li><li>Reset <code>state</code>; or,</li><li><code>ref.current.value = &quot;&quot;</code>; or,</li><li><code>e.target.reset()</code><ul><li><code>e.target</code> is the form element</li></ul></li></ul></li></ul><h3 id="validating-user-input" tabindex="-1"><a class="header-anchor" href="#validating-user-input"><span>Validating User Input</span></a></h3><ul><li><p>Compute the <code>isValid</code> logic and render conditionally</p></li><li><p>Always add <code>onSubmit</code> validation</p></li><li><p>Validating input on every key stoke via <code>state</code></p><ul><li>Errors may be shown too early</li></ul></li><li><p>Validating input upon lost focus</p><ul><li><code>OnBlur={handleInputBlur}</code></li><li>Errors may not disappear when the user starts to type again</li></ul><blockquote><p>Combining validating on key stoke and lost focus is a good pattern</p></blockquote></li><li><p>Validating input upon form submission</p></li><li><p>Validating input via built-in validation <code>props</code></p><ul><li><code>type</code>, <code>required</code>, etc.</li></ul><blockquote><p>Combining custom and built-in validation logic is also a good pattern</p></blockquote></li></ul><h3 id="building-custom-solutions" tabindex="-1"><a class="header-anchor" href="#building-custom-solutions"><span>Building Custom Solutions</span></a></h3><ul><li>Custom <code>Input</code> Component</li><li>Custom <code>useInput</code> Hook</li><li>Outsource validation logic</li><li>Use third-party form libraries</li></ul><hr><h2 id="redux" tabindex="-1"><a class="header-anchor" href="#redux"><span>Redux</span></a></h2><h3 id="what-is-redux" tabindex="-1"><a class="header-anchor" href="#what-is-redux"><span>What is Redux</span></a></h3><ul><li><p>Redux is a state management system for <em>cross-component</em> or <em>app-wide</em> state</p></li><li><p>Redux can be used anywhere without React</p></li><li><p>Core concept of Redux</p><figure><img src="`+l+`" alt="Redux-Concept" tabindex="0" loading="lazy"><figcaption>Redux-Concept</figcaption></figure></li><li><p>Redux Toolkit</p><ul><li><p><a href="https://redux-toolkit.js.org/" target="_blank" rel="noopener noreferrer"><strong>Redux Toolkit</strong></a> (also known as <strong>&quot;RTK&quot;</strong> for short) is the official recommended approach for writing Redux logic</p></li><li><p>The <code>@reduxjs/toolkit</code> package wraps around the core <code>redux</code> package, and contains API methods and common dependencies that are essential for building a Redux app</p></li><li><p><strong>If you are writing any Redux logic today, you should be using Redux Toolkit to write that code!</strong></p></li></ul></li></ul><h3 id="why-using-redux" tabindex="-1"><a class="header-anchor" href="#why-using-redux"><span>Why using Redux</span></a></h3><ul><li>Potential problems of <code>context</code><ul><li>Deeply nested components</li><li>Complex providers</li><li>Performance issue from high-frequency changes</li></ul></li><li><strong>Redux is most useful in cases when</strong>: <ul><li>You have large amounts of application state that are needed in many places in the app</li><li>The app state is updated frequently</li><li>The logic to update that state may be complex</li><li>The app has a medium or large-sized codebase, and might be worked on by many people</li><li>You need to see how that state is being updated over time</li></ul></li><li><a href="https://changelog.com/posts/when-and-when-not-to-reach-for-redux" target="_blank" rel="noopener noreferrer">When(and when not) to reach for Redux by Mark Erikson</a></li><li>In a nutshell, use the tool when you need it</li></ul><h3 id="how-to-use-redux" tabindex="-1"><a class="header-anchor" href="#how-to-use-redux"><span>How to use Redux</span></a></h3><h4 id="redux-core" tabindex="-1"><a class="header-anchor" href="#redux-core"><span>Redux Core</span></a></h4><ul><li><p><strong>Store</strong></p><ul><li><p>The current Redux application state lives in an object called <strong>store</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-javascript"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> redux</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;redux&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> store</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> redux</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createStore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">counterReducer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">store</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// {value: 0}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>Subscriber</strong></p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>const state = store.getState();</span></span>
<span class="line"><span>store.subscribe(render);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>Selector</strong></p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>const selectCounterValue = state =&gt; state.value</span></span>
<span class="line"><span>const currentValue = selectCounterValue(store.getState())</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>Dispatch</strong></p><ul><li><p>The Redux <code>store</code> has a method called <code>dispatch</code></p></li><li><p><strong>The only way to update the <code>state</code> is to call <code>store.dispatch(action)</code></strong></p></li><li><p>The <code>store</code> will run its <code>slice reducer</code> function and save the new <code>state</code> value inside</p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>store.dispatch({ type: &#39;counter/increment&#39; })</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>Typically we call <code>actionCreator</code> to dispatch the right <code>action</code></p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>const increment = () =&gt; {</span></span>
<span class="line"><span>  return {</span></span>
<span class="line"><span>    type: &#39;counter/increment&#39;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>store.dispatch(increment())</span></span>
<span class="line"><span></span></span>
<span class="line"><span>console.log(store.getState())</span></span>
<span class="line"><span>// {value: 1}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>Reducer</strong></p><ul><li><p>Reducer is a function that receives the current <code>state</code> and an <code>action</code> object, decide how to update the <code>state</code> id necessary, and return the new <code>state</code></p></li><li><p><strong>You can think of a <code>reducer</code> as an event listener which handles events based on the received action (event) type</strong></p></li><li><p>Reducer should be a <strong>pure function</strong></p><ul><li>They must not do any asynchronous logic, calculate random values, or cause other &quot;side effects&quot;</li></ul></li><li><p>State should be <strong>immutable</strong></p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>const initialState = { value: 0 }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function counterReducer(state = initialState, action) {</span></span>
<span class="line"><span>  // Check to see if the reducer cares about this action</span></span>
<span class="line"><span>  if (action.type === &#39;counter/increment&#39;) {</span></span>
<span class="line"><span>    // If so, make a copy of \`state\`</span></span>
<span class="line"><span>    return {</span></span>
<span class="line"><span>      ...state,</span></span>
<span class="line"><span>      // and update the copy with the new value</span></span>
<span class="line"><span>      value: state.value + 1</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  // otherwise return the existing state unchanged</span></span>
<span class="line"><span>  return state</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>Action</strong></p><ul><li><p>An <code>action</code> is a plain JavaScript object that has a <code>type</code> field</p></li><li><p><strong>You can think of an action as an event that describes something that happened in the application</strong></p></li><li><p>The <code>type</code> field should be a string that gives this action a descriptive name. We usually write that type string like <code>&quot;domain/eventName&quot;</code>, where the first part is the feature or category that this action belongs to, and the second part is the specific thing that happened</p></li><li><p>An action object can have other fields with additional information about what happened. By convention, we put that information in a field called <code>payload</code></p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>const addTodoAction = {</span></span>
<span class="line"><span>  type: &#39;todos/todoAdded&#39;,</span></span>
<span class="line"><span>  payload: &#39;Buy milk&#39;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>Action Creators</strong></p><ul><li><p>An action creator is a function that creates and return <code>action</code> object</p></li><li><p>It is typically used so we don&#39;t have to write the <code>action</code> object by hand everytime</p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>const addTodo = text =&gt; {</span></span>
<span class="line"><span>  return {</span></span>
<span class="line"><span>    type: &#39;todos/todoAdded&#39;,</span></span>
<span class="line"><span>    payload: text</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h4 id="react-redux-application-contents-modern-way" tabindex="-1"><a class="header-anchor" href="#react-redux-application-contents-modern-way"><span><strong>React-Redux Application Contents (Modern way)</strong></span></a></h4><ul><li>Redux allows <code>store</code> setup to be customised with different plugins (<code>middleware</code> and <code>enhancers</code>)</li></ul><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>// store.js</span></span>
<span class="line"><span>import { configureStore } from &#39;@reduxjs/toolkit&#39;</span></span>
<span class="line"><span>import counterReducer from &#39;../store/counterSlice&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default configureStore({</span></span>
<span class="line"><span>  // root reducer</span></span>
<span class="line"><span>  reducer: {</span></span>
<span class="line"><span>    // slice reducer</span></span>
<span class="line"><span>    counter: counterReducer</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>})</span></span>
<span class="line"><span>// When we pass in an object like {counter: counterReducer}, that says that</span></span>
<span class="line"><span>// we want to have a state.counter section of our Redux state object, and that</span></span>
<span class="line"><span>// we want the counterReducer function to be in charge of deciding if and</span></span>
<span class="line"><span>// how to update the state.counter section whenever an action is dispatched.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>A &quot;redux slice&quot; is a collection of Redux reducer logic and actions for a single feature in your app</strong>, typically defined together in a single file. The name comes from splitting up the root Redux state object into multiple &quot;slices&quot; of state</li></ul><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>// counterSlice.js</span></span>
<span class="line"><span>import { createSlice } from &#39;@reduxjs/toolkit&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const counterSlice = createSlice({</span></span>
<span class="line"><span>  name: &#39;counter&#39;,</span></span>
<span class="line"><span>  initialState: {</span></span>
<span class="line"><span>    value: 0</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  reducers: {</span></span>
<span class="line"><span>    increment: state =&gt; {</span></span>
<span class="line"><span>      // Redux Toolkit allows us to write &quot;mutating&quot; logic in reducers. It</span></span>
<span class="line"><span>      // doesn&#39;t actually mutate the state because it uses the immer library,</span></span>
<span class="line"><span>      // which detects changes to a &quot;draft state&quot; and produces a brand new</span></span>
<span class="line"><span>      // immutable state based off those changes</span></span>
<span class="line"><span>      state.value += 1</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    decrement: state =&gt; {</span></span>
<span class="line"><span>      state.value -= 1</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    incrementByAmount: (state, action) =&gt; {</span></span>
<span class="line"><span>      state.value += action.payload</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>})</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// action creators</span></span>
<span class="line"><span>export const { increment, decrement, incrementByAmount } = counterSlice.actions</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// reducer function</span></span>
<span class="line"><span>export default counterSlice.reducer</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// selector</span></span>
<span class="line"><span>export const selectCount = state =&gt; state.counter.value</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>The <code>React-Redux</code> library has a set of custom Hooks that allow your React component to interact with a Redux <code>store</code></li><li>React components can&#39;t talk to the Redux <code>store</code> directly, because we&#39;re not allowed to import it into component files</li></ul><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>// Counter.jsx</span></span>
<span class="line"><span>import React, { useState } from &#39;react&#39;</span></span>
<span class="line"><span>import { useSelector, useDispatch } from &#39;react-redux&#39;</span></span>
<span class="line"><span>import {</span></span>
<span class="line"><span>  decrement,</span></span>
<span class="line"><span>  increment,</span></span>
<span class="line"><span>  incrementByAmount,</span></span>
<span class="line"><span>  selectCount</span></span>
<span class="line"><span>} from &#39;./counterSlice&#39;</span></span>
<span class="line"><span>import styles from &#39;./Counter.module.css&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export function Counter() {</span></span>
<span class="line"><span>  // Reading data with useSelector</span></span>
<span class="line"><span>  const count = useSelector(selectCount)</span></span>
<span class="line"><span>  // Dispatch actions</span></span>
<span class="line"><span>  const dispatch = useDispatch()</span></span>
<span class="line"><span>  const [incrementAmount, setIncrementAmount] = useState(&#39;2&#39;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  return (</span></span>
<span class="line"><span>    &lt;div&gt;</span></span>
<span class="line"><span>      &lt;div className={styles.row}&gt;</span></span>
<span class="line"><span>        &lt;button</span></span>
<span class="line"><span>          className={styles.button}</span></span>
<span class="line"><span>          aria-label=&quot;Increment value&quot;</span></span>
<span class="line"><span>          onClick={() =&gt; dispatch(increment())}</span></span>
<span class="line"><span>        &gt;</span></span>
<span class="line"><span>          +</span></span>
<span class="line"><span>        &lt;/button&gt;</span></span>
<span class="line"><span>        &lt;span className={styles.value}&gt;{count}&lt;/span&gt;</span></span>
<span class="line"><span>        &lt;button</span></span>
<span class="line"><span>          className={styles.button}</span></span>
<span class="line"><span>          aria-label=&quot;Decrement value&quot;</span></span>
<span class="line"><span>          onClick={() =&gt; dispatch(decrement())}</span></span>
<span class="line"><span>        &gt;</span></span>
<span class="line"><span>          -</span></span>
<span class="line"><span>        &lt;/button&gt;</span></span>
<span class="line"><span>        &lt;button</span></span>
<span class="line"><span>          className={styles.button}</span></span>
<span class="line"><span>          aria-label=&quot;Increment value by amount&quot;</span></span>
<span class="line"><span>          onClick={() =&gt; dispatch(incrementByAmount(incrementAmount))}</span></span>
<span class="line"><span>        &gt;</span></span>
<span class="line"><span>          -</span></span>
<span class="line"><span>        &lt;/button&gt;</span></span>
<span class="line"><span>      &lt;/div&gt;</span></span>
<span class="line"><span>      {/* omit additional rendering output here */}</span></span>
<span class="line"><span>    &lt;/div&gt;</span></span>
<span class="line"><span>  )</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Providing the <code>store</code></li></ul><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>// index.js or main.jsx</span></span>
<span class="line"><span>import React from &#39;react&#39;</span></span>
<span class="line"><span>import ReactDOM from &#39;react-dom&#39;</span></span>
<span class="line"><span>import &#39;./index.css&#39;</span></span>
<span class="line"><span>import App from &#39;./App&#39;</span></span>
<span class="line"><span>import store from &#39;./app/store&#39;</span></span>
<span class="line"><span>import { Provider } from &#39;react-redux&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ReactDOM.render(</span></span>
<span class="line"><span>  &lt;Provider store={store}&gt;</span></span>
<span class="line"><span>    &lt;App /&gt;</span></span>
<span class="line"><span>  &lt;/Provider&gt;,</span></span>
<span class="line"><span>  document.getElementById(&#39;root&#39;)</span></span>
<span class="line"><span>)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Writing async logic</p><ul><li><p>Inside <code>useEffect()</code>, listening to <code>state</code> change</p><ul><li>A potential problem <ul><li><code>useEffect()</code> send the initial (i.e. empty) data to our backend and overwrite any data stored there</li><li>Use an if block to skip the first execution</li></ul></li></ul></li><li><p>Using <code>thunk</code></p><ul><li><code>thunk</code> is a programming term that means <em>&quot;a piece of code that does some delayed work&quot;</em></li><li>Using thunks requires the <code>redux-thunk</code> middleware to be added to the Redux store as part of its configuration</li><li><strong>A <code>thunk</code> function is a function that accept two arguments: Redux <code>store</code> <code>dispatch()</code> method and <code>getState()</code> method</strong></li><li><code>thunk</code> function are not directly called by application code, instead, they are passed to <code>store.dispatch()</code></li><li>We normally use custom action creator to generate <code>thunk</code> function</li><li>A <strong><code>thunk action creator</code></strong> is a function that may have some arguments, and returns a <code>thunk</code> function</li><li><strong><code>thunk</code> gives us a place to put side effects</strong></li></ul><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>// the outside &quot;thunk creator&quot; function</span></span>
<span class="line"><span>const fetchUserById = userId =&gt; {</span></span>
<span class="line"><span>  // the inside &quot;thunk function&quot;</span></span>
<span class="line"><span>  return async (dispatch, getState) =&gt; {</span></span>
<span class="line"><span>    try {</span></span>
<span class="line"><span>      // make an async call in the thunk</span></span>
<span class="line"><span>      const user = await userAPI.fetchById(userId)</span></span>
<span class="line"><span>      // dispatch an action when we get the response back</span></span>
<span class="line"><span>      dispatch(userLoaded(user))</span></span>
<span class="line"><span>    } catch (err) {</span></span>
<span class="line"><span>      // If something went wrong, handle it here</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// use arrow function</span></span>
<span class="line"><span>export const fetchUserById = userId =&gt; async dispatch =&gt; {</span></span>
<span class="line"><span>  const user = await userAPI.fetchById(userId);</span></span>
<span class="line"><span>  dispatch(userLoaded(user))</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h3 id="redux-application-data-flow" tabindex="-1"><a class="header-anchor" href="#redux-application-data-flow"><span>Redux Application Data Flow</span></a></h3><ul><li>Redux data flow is one-way</li><li>Initial setup: <ul><li>A Redux store is created using a root reducer function</li><li>The store calls the root reducer once, and saves the return value as its initial <code>state</code></li><li>When the UI is first rendered, UI components access the current state of the Redux store, and use that data to decide what to render. They also subscribe to any future store updates so they can know if the state has changed.</li></ul></li><li>Updates: <ul><li>Something happens in the app, such as a user clicking a button</li><li>The app code dispatches an action to the Redux store, like <code>dispatch({type: &#39;counter/increment&#39;})</code></li><li>The store runs the reducer function again with the previous <code>state</code> and the current <code>action</code>, and saves the return value as the new <code>state</code></li><li>The store notifies all parts of the UI that are subscribed that the store has been updated</li><li>Each UI component that needs data from the store checks to see if the parts of the state they need have changed.</li><li>Each component that sees its data has changed forces a re-render with the new data, so it can update what&#39;s shown on the screen</li></ul></li></ul><hr><h2 id="react-router" tabindex="-1"><a class="header-anchor" href="#react-router"><span>React Router</span></a></h2><ul><li><p>React is a single page application (SPA)</p></li><li><p>Client-side code simply watches url changes and then loads different React components, instead of fetching new html files</p></li><li><p>Application content</p><ol><li><p><code>npm install react-router-dom</code></p></li><li><p>Adding a router</p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>// index.js</span></span>
<span class="line"><span>import * as React from &quot;react&quot;;</span></span>
<span class="line"><span>import * as ReactDOM from &quot;react-dom/client&quot;;</span></span>
<span class="line"><span>import {</span></span>
<span class="line"><span>  createBrowserRouter,</span></span>
<span class="line"><span>  RouterProvider,</span></span>
<span class="line"><span>} from &quot;react-router-dom&quot;;</span></span>
<span class="line"><span>import &quot;./index.css&quot;;</span></span>
<span class="line"><span>import HomePage from &#39;./pages/Home&#39;;</span></span>
<span class="line"><span>import ProductsPage from &#39;./pages/Products&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const router = createBrowserRouter([</span></span>
<span class="line"><span>  { path: &quot;/&quot;, element: &lt;HomePage /&gt;, },</span></span>
<span class="line"><span>  { path: &quot;/products&quot;, element: &lt;ProductsPage /&gt;, },</span></span>
<span class="line"><span>]);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ReactDOM.createRoot(document.getElementById(&quot;root&quot;)).render(</span></span>
<span class="line"><span>  &lt;React.StrictMode&gt;</span></span>
<span class="line"><span>    &lt;RouterProvider router={router} /&gt;</span></span>
<span class="line"><span>  &lt;/React.StrictMode&gt;</span></span>
<span class="line"><span>);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Due to the decoupling of fetching and rendering in the design of the data APIs, you should create your router outside of the React tree with a statically defined set of routes</li><li><a href="https://reactrouter.com/en/main/routers/create-browser-router" target="_blank" rel="noopener noreferrer"><code>createBrowserRouter()</code></a></li></ul></li><li><p>Navigating between Pages with Links</p><ul><li>Prevent default behavior that sending request to the server and restart the React application</li></ul><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>// Home.jsx</span></span>
<span class="line"><span>import { Link } from &#39;react-router-dom&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// omitted</span></span>
<span class="line"><span>&lt;Link to={&quot;/products&quot;}&gt;Products&lt;/Link&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><a href="https://reactrouter.com/en/main/components/link" target="_blank" rel="noopener noreferrer">Link</a></p></li><li><p>Under the hood, <code>Link</code> renders a <code>&lt;a&gt;&lt;/a&gt;</code> elememnt</p></li><li><p><a href="https://reactrouter.com/en/main/components/nav-link" target="_blank" rel="noopener noreferrer">NavLink</a></p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>&lt;NavLink</span></span>
<span class="line"><span>  to=&quot;/messages&quot;</span></span>
<span class="line"><span>  className={({ isActive, isPending, isTransitioning }) =&gt;</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>      isPending ? &quot;pending&quot; : &quot;&quot;,</span></span>
<span class="line"><span>      isActive ? &quot;active&quot; : &quot;&quot;,</span></span>
<span class="line"><span>      isTransitioning ? &quot;transitioning&quot; : &quot;&quot;,</span></span>
<span class="line"><span>    ].join(&quot; &quot;)</span></span>
<span class="line"><span>   end</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>&gt;</span></span>
<span class="line"><span>  Messages</span></span>
<span class="line"><span>&lt;/NavLink&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>Navigating programmatically</p><ul><li><a href="https://reactrouter.com/en/main/hooks/use-navigate" target="_blank" rel="noopener noreferrer"><code>useNavigate()</code></a></li></ul></li><li><p>Nested Routes</p><ul><li>Wrapper page that wraps other pages</li></ul><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>// Root.js</span></span>
<span class="line"><span>import { Outlet } from &#39;react-router-dom&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default Root() {</span></span>
<span class="line"><span>  return (</span></span>
<span class="line"><span>    &lt;&gt;</span></span>
<span class="line"><span>    	&lt;Navbar /&gt;</span></span>
<span class="line"><span>    	&lt;Outlet /&gt;</span></span>
<span class="line"><span>    &lt;/&gt;</span></span>
<span class="line"><span>  );</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// index.js</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// omitted</span></span>
<span class="line"><span>const router = createBrowserRouter([</span></span>
<span class="line"><span>  {</span></span>
<span class="line"><span> 		path: &quot;/&quot;,</span></span>
<span class="line"><span>  	element: &lt;Root /&gt;,</span></span>
<span class="line"><span>    children: [</span></span>
<span class="line"><span>      { index: true, element: &lt;HomePage /&gt;, },</span></span>
<span class="line"><span>  		{ path: &quot;/products&quot;, element: &lt;ProductsPage /&gt;, },</span></span>
<span class="line"><span>    ]</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>]);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Index routes <ul><li>When a route has children, and you&#39;re at the parent route&#39;s path, the <code>&lt;Outlet&gt;</code> has nothing to render because no children match</li><li>You can think of index routes as the default child route to fill in that space</li></ul></li></ul></li><li><p>Dynamic Routes</p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>// index.js</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// omitted</span></span>
<span class="line"><span>const router = createBrowserRouter([</span></span>
<span class="line"><span>  {</span></span>
<span class="line"><span> 		path: &quot;/&quot;,</span></span>
<span class="line"><span>  	element: &lt;Root /&gt;,</span></span>
<span class="line"><span>    children: [</span></span>
<span class="line"><span>      { index: true, element: &lt;HomePage /&gt;, },</span></span>
<span class="line"><span>  		{ path: &quot;products&quot;, element: &lt;ProductsPage /&gt;, },</span></span>
<span class="line"><span>      { path: &quot;products/:id&quot;, element: &lt;ProductDetailPage /&gt; },</span></span>
<span class="line"><span>    ]</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>]);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// ProductDetail.jsx</span></span>
<span class="line"><span>import { useParams } from &#39;react-router-dom&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default function ProductDetailPage() {</span></span>
<span class="line"><span>  const { id } = useParams();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  return (</span></span>
<span class="line"><span>  	&lt;&gt;</span></span>
<span class="line"><span>    	&lt;p&gt;{id}&lt;/p&gt;</span></span>
<span class="line"><span>    &lt;/&gt;</span></span>
<span class="line"><span>  );</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Dynamic Segments <ul><li>If a path segment starts with <code>:</code> then it becomes a &quot;dynamic segment&quot;</li><li>When the route matches the URL, the dynamic segment will be parsed from the URL and provided as <code>params</code> to other router APIs</li></ul></li><li><a href="https://reactrouter.com/en/main/hooks/use-params" target="_blank" rel="noopener noreferrer"><code>useParams()</code></a></li></ul></li><li><p>Handling error pages</p><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>// Error.jsx</span></span>
<span class="line"><span>import { useRouteError } from &quot;react-router-dom&quot;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default function ErrorPage() {</span></span>
<span class="line"><span>  const error = useRouteError();</span></span>
<span class="line"><span>  console.error(error);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  return (</span></span>
<span class="line"><span>    &lt;div id=&quot;error-page&quot;&gt;</span></span>
<span class="line"><span>      &lt;h1&gt;Oops!&lt;/h1&gt;</span></span>
<span class="line"><span>      &lt;p&gt;Sorry, an unexpected error has occurred.&lt;/p&gt;</span></span>
<span class="line"><span>      &lt;p&gt;</span></span>
<span class="line"><span>        &lt;i&gt;{error.statusText || error.message}&lt;/i&gt;</span></span>
<span class="line"><span>      &lt;/p&gt;</span></span>
<span class="line"><span>    &lt;/div&gt;</span></span>
<span class="line"><span>  );</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// index.js</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// omitted</span></span>
<span class="line"><span>const router = createBrowserRouter([</span></span>
<span class="line"><span>  {</span></span>
<span class="line"><span>    path: &quot;/&quot;,</span></span>
<span class="line"><span>    element: &lt;Root /&gt;,</span></span>
<span class="line"><span>    errorElement: &lt;ErrorPage /&gt;,</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>]);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>404 NOT FOUND</li></ul></li></ol></li><li><p>Relative &amp; Absolute Paths</p><ul><li>Absolute path <ul><li>Path starts with <code>/</code></li><li>Describes the location from the root directory</li></ul></li><li>Relative path <ul><li>Describes the location of a file relative to the current (working) directory <code>*</code></li><li>Two dots (<code>..</code>) represent moving to a parent directory</li><li>The single dot indicates your <em>current location</em></li></ul></li></ul></li></ul><hr><h2 id="authentication" tabindex="-1"><a class="header-anchor" href="#authentication"><span>Authentication</span></a></h2><hr><h2 id="styling-react-components" tabindex="-1"><a class="header-anchor" href="#styling-react-components"><span>Styling React Components</span></a></h2><h3 id="styling-with-vanilla-css" tabindex="-1"><a class="header-anchor" href="#styling-with-vanilla-css"><span>Styling with vanilla CSS</span></a></h3><ul><li>Import CSS file into corresponding JSX file</li><li>Pros <ul><li>CSS code is decoupled from JSX code</li></ul></li><li>Cons <ul><li>You need to know CSS</li><li><strong>CSS is not scoped to components</strong>, CSS rules may clash across components</li></ul></li></ul><h3 id="scoping-styles" tabindex="-1"><a class="header-anchor" href="#scoping-styles"><span>Scoping Styles</span></a></h3><ul><li>Use inline <code>style</code> attribute <ul><li>The value is an object, not a string</li></ul></li><li>Use CSS modules <ul><li>Change <code>Component.css</code> to <code>Component.module.css</code></li><li>Change <code>import &quot;./Component.css&quot;</code> to <code>import classes from &quot;./Component.module.css&quot;</code></li><li><code>&lt;p className={classes.paragraph}&gt;test&lt;/p&gt;</code></li></ul></li><li>CSS-IN-JS Styling with &quot;Styled Components&quot; <ul><li>Use a package <a href="https://styled-components.com/" target="_blank" rel="noopener noreferrer">Styled components</a></li></ul></li></ul><h3 id="styling-with-tailwind-css" tabindex="-1"><a class="header-anchor" href="#styling-with-tailwind-css"><span>Styling with Tailwind CSS</span></a></h3><ul><li>The main idea of Tailwind: add tiny utility CSS classes to HTML elements</li><li><a href="https://tailwindcss.com/" target="_blank" rel="noopener noreferrer">Tailwind website</a></li></ul><h3 id="dynamic-styling" tabindex="-1"><a class="header-anchor" href="#dynamic-styling"><span>Dynamic Styling</span></a></h3><ul><li>Dynamic inline styling</li><li>Dynamic styling by add class name to component dynamically, using template literal</li></ul><h3 id="animating" tabindex="-1"><a class="header-anchor" href="#animating"><span>Animating</span></a></h3><ul><li><p>Just CSS</p><ul><li><p><code>transition</code></p></li><li><p><code>@keyframes</code> and <code>animation</code></p></li></ul></li><li><p>Framer Motion</p></li></ul><hr><h2 id="testing" tabindex="-1"><a class="header-anchor" href="#testing"><span>Testing</span></a></h2><ul><li><p>Manual testing</p><ul><li>Write code -&gt; Preview -&gt; Improve code -&gt; Repeat</li><li>Error-prone</li></ul></li><li><p>Automated testing</p><ul><li>Write code that automatically tests your code</li><li>Unit test <ul><li>Test the individual building blocks in isolation</li></ul></li><li>Integration test <ul><li>Test the combination of multiple building blocks</li></ul></li><li>End-to-End(E2E) test <ul><li>Test the complete scenarios / user flows in your app</li></ul></li></ul></li><li><p>Testing tools (popular) for React</p><ul><li>Tool for running our tests and asserting the results <ul><li>Jest</li></ul></li><li>Tool for &quot;simulating&quot; our React app <ul><li>React Testing Library</li></ul></li></ul></li><li><p>How to write a test</p><ul><li><p><strong>A</strong>rrange: set up test data, conditions, and environment</p></li><li><p><strong>A</strong>ct: run logic that should be tested</p></li><li><p><strong>A</strong>ssert: compare execution results with ecpected results</p></li><li><div class="language-react line-numbers-mode" data-highlighter="shiki" data-ext="react" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-react"><span class="line"><span>// Component.test.js</span></span>
<span class="line"><span>describe(&quot;Testing suite A&quot;, () =&gt; {</span></span>
<span class="line"><span>  test(&quot;Test A&quot;, () =&gt; {});</span></span>
<span class="line"><span>  test(&quot;Test B&quot;, () =&gt; {});</span></span>
<span class="line"><span>});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><hr><h2 id="deployment" tabindex="-1"><a class="header-anchor" href="#deployment"><span>Deployment</span></a></h2><ul><li>Deployment steps <ol><li>Test code</li><li>Optimise code</li><li>Build app</li><li>Upload app</li><li>Configure server</li></ol></li><li>Lazy loading <ul><li>Load certain components only when they are needed instead of ahead of time</li><li>Refactor from import at the top to <code>lazy()</code>, <code>import()</code>, <code>&lt;Suspend fallback={}&gt;&lt;/Suspend&gt;</code></li></ul></li><li>Client-side routing &amp; server-side routing</li></ul><hr><h2 id="references" tabindex="-1"><a class="header-anchor" href="#references"><span>References</span></a></h2><ul><li><a href="https://react.dev/learn" target="_blank" rel="noopener noreferrer">React Tutorial</a></li><li><a href="https://redux.js.org/introduction/getting-started" target="_blank" rel="noopener noreferrer">Redux Tutorial</a></li><li><a href="https://reactrouter.com/en/main" target="_blank" rel="noopener noreferrer">React Router</a></li><li><a href="https://www.framer.com/motion/" target="_blank" rel="noopener noreferrer">Framar Motion</a></li></ul>`,146)])])}const c=e(t,[["render",p]]),h=JSON.parse(`{"path":"/notes/framework/react.html","title":"React Notes","lang":"en-US","frontmatter":{"title":"React Notes","icon":"devicon:react","order":2,"category":["Note"],"tag":["Framework","React","Frontend"],"footer":false,"editLink":false,"description":"Intro React is a JavaScript library for rendering UI Components React is all about Components A component is a piece of the UI that has its own logic and appearance We don't hav...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"React Notes\\",\\"image\\":[\\"https://hadjshell.netlify.app/assets/image/react/Redux-Concept.png\\"],\\"dateModified\\":\\"2025-12-17T15:39:47.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hadjshell\\",\\"url\\":\\"https://github.com/hadjShell\\"}]}"],["meta",{"property":"og:url","content":"https://hadjshell.netlify.app/notes/framework/react.html"}],["meta",{"property":"og:site_name","content":"Hadjshell's Field"}],["meta",{"property":"og:title","content":"React Notes"}],["meta",{"property":"og:description","content":"Intro React is a JavaScript library for rendering UI Components React is all about Components A component is a piece of the UI that has its own logic and appearance We don't hav..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://hadjshell.netlify.app/assets/image/react/Redux-Concept.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-12-17T15:39:47.000Z"}],["meta",{"property":"article:tag","content":"Frontend"}],["meta",{"property":"article:tag","content":"React"}],["meta",{"property":"article:tag","content":"Framework"}],["meta",{"property":"article:modified_time","content":"2025-12-17T15:39:47.000Z"}]]},"git":{"createdTime":1765985987000,"updatedTime":1765985987000,"contributors":[{"name":"张家源","username":"","email":"davidzhang0880@gmail.com","commits":1}]},"readingTime":{"minutes":25.61,"words":7682},"filePathRelative":"notes/framework/react.md","excerpt":"<h2>Intro</h2>\\n<ul>\\n<li>React is a JavaScript library for rendering UI</li>\\n</ul>\\n<hr>\\n<h2>Components</h2>\\n<ul>\\n<li>React is all about <em>Components</em></li>\\n<li>A component is a piece of the UI that has its own logic and appearance</li>\\n<li>We don't have to manipulate DOM manually anymore with components</li>\\n<li><strong>A component is just a JavaScript function</strong>\\n<ul>\\n<li>Their names always begin with a capital letter</li>\\n<li>They return JSX markup</li>\\n</ul>\\n</li>\\n<li>React application begins at a \\"root\\" component</li>\\n</ul>","autoDesc":true}`);export{c as comp,h as data};
